/*
 * Copyright (C) 2007-2014 Diego Perini
 * All rights reserved.
 *
 * nwmatcher.js - A fast CSS selector engine and matcher
 *
 * Author: Diego Perini <diego.perini at gmail com>
 * Version: 1.3.3
 * Created: 20070722
 * Release: 20140330
 *
 * License:
 *  http://javascript.nwbox.com/NWMatcher/MIT-LICENSE
 * Download:
 *  http://javascript.nwbox.com/NWMatcher/nwmatcher.js
 */

(function(e,t){if(typeof module=="object"&&typeof exports=="object"){module.exports=function(e){e.console=console;e.parseInt=parseInt;e.Function=Function;e.Boolean=Boolean;e.Number=Number;e.RegExp=RegExp;e.String=String;e.Object=Object;e.Array=Array;e.Error=Error;e.Date=Date;e.Math=Math;var n=e.Object();t(e,n);return n};module.factory=t}else{t(e,(e.NW||(e.NW=e.Object()))&&(e.NW.Dom||(e.NW.Dom=e.Object())));e.NW.Dom.factory=t}})(this,function(e,t){var n="nwmatcher-1.3.3",r=t,i=e.document,s=i.documentElement,o=e.Array.prototype.slice,u=e.Object.prototype.toString,a,f,l,c,h,p,d,v,m,g="[#.:]?",y="([~*^$|!]?={1})",b="[\\x20\\t\\n\\r\\f]*",w="[\\x20]|[>+~][^>+~]",E="(?:[-+]?\\d*n)?[-+]?\\d*",S='"[^"]*"'+"|'[^']*'",x="\\([^()]+\\)|\\(.*\\)",T="\\{[^{}]+\\}|\\{.*\\}",N="\\[[^[\\]]*\\]|\\[.*\\]",C="\\[.*\\]|\\(.*\\)|\\{.*\\}",k="(?:[-\\w]|[^\\x00-\\xa0]|\\\\.)",L="(?:-?[_a-zA-Z]{1}[-\\w]*|[^\\x00-\\xa0]+|\\\\.+)+",A="("+S+"|"+L+")",O=b+"("+k+"*:?"+k+"+)"+b+"(?:"+y+b+A+")?"+b,M=O.replace(A,"([\\x22\\x27]*)((?:\\\\?.)*?)\\3"),_="((?:"+E+"|"+S+"|"+g+"|"+k+"+|"+"\\["+O+"\\]|"+"\\(.+\\)|"+b+"|"+",)+)",D=".+",P="(?=[\\x20\\t\\n\\r\\f]*[^>+~(){}<>])"+"("+"\\*"+"|(?:"+g+L+")"+"|"+w+"|\\["+O+"\\]"+"|\\("+_+"\\)"+"|\\{"+D+"\\}"+"|(?:,|"+b+")"+")+",H=P.replace(_,".*"),B=new e.RegExp(P,"g"),j=new e.RegExp("^"+b+"|"+b+"$","g"),F=new e.RegExp("^("+"(?!:not)"+"("+g+"|"+L+"|\\([^()]*\\))+"+"|\\["+O+"\\]"+")$"),I=new e.RegExp("("+"[^,\\\\()[\\]]+"+"|"+N+"|"+x+"|"+T+"|\\\\."+")+","g"),q=new e.RegExp("("+"\\["+O+"\\]|"+"\\("+_+"\\)|"+"\\\\.|[^\\x20\\t\\r\\n\\f>+~])+","g"),R=/[\x20\t\n\r\f]+/g,U=new e.RegExp(L+"|^$"),z=function(){var t=(i.appendChild+"").replace(/appendChild/g,"");return function(n,r){var i=n&&n[r]||false;return i&&typeof i!="string"&&t==(i+"").replace(new e.RegExp(r,"g"),"")}}(),W=z(i,"hasFocus"),X=z(i,"querySelector"),V=z(i,"getElementById"),$=z(s,"getElementsByTagName"),J=z(s,"getElementsByClassName"),K=z(s,"getAttribute"),Q=z(s,"hasAttribute"),G=function(){var e=false;try{e=!!o.call(i.childNodes,0)[0]}catch(t){}return e}(),Y="nextElementSibling"in s&&"previousElementSibling"in s,Z=V?function(){var t=true,n="x"+e.String(+(new e.Date)),r=i.createElementNS?"a":'<a name="'+n+'">';(r=i.createElement(r)).name=n;s.insertBefore(r,s.firstChild);t=!!i.getElementById(n);s.removeChild(r);return t}():true,et=$?function(){var e=i.createElement("div");e.appendChild(i.createComment(""));return!!e.getElementsByTagName("*")[0]}():true,tt=J?function(){var e,t=i.createElement("div"),n="台北";t.appendChild(i.createElement("span")).setAttribute("class",n+"abc "+n);t.appendChild(i.createElement("span")).setAttribute("class","x");e=!t.getElementsByClassName(n)[0];t.lastChild.className=n;return e||t.getElementsByClassName(n).length!=2}():true,nt=K?function(){var e=i.createElement("input");e.setAttribute("value",5);return e.defaultValue!=5}():true,rt=Q?function(){var e=i.createElement("option");e.setAttribute("selected","selected");return!e.hasAttribute("selected")}():true,it=function(){var e=i.createElement("select");e.appendChild(i.createElement("option"));return!e.firstChild.selected}(),st,ot,ut,at,ft=/opera/i.test(u.call(e.opera)),lt=ft&&e.parseFloat(e.opera.version())>=11,ct=X?function(){var t=new e.Array,n=i.createElement("div"),r,s=function(e,t,n,r){var i=false;t.appendChild(n);try{i=t.querySelectorAll(e).length==r}catch(s){}while(t.firstChild){t.removeChild(t.firstChild)}return i};r=i.createElement("p");r.setAttribute("class","");s('[class^=""]',n,r,1)&&t.push('[*^$]=[\\x20\\t\\n\\r\\f]*(?:""|'+"'')");r=i.createElement("option");r.setAttribute("selected","selected");s(":checked",n,r,0)&&t.push(":checked");r=i.createElement("input");r.setAttribute("type","hidden");s(":enabled",n,r,0)&&t.push(":enabled",":disabled");r=i.createElement("link");r.setAttribute("href","x");s(":link",n,r,1)||t.push(":link");if(rt){t.push("\\[[\\x20\\t\\n\\r\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}return t.length?new e.RegExp(t.join("|")):{test:function(){return false}}}():true,ht=new e.RegExp("(?:\\[[\\x20\\t\\n\\r\\f]*class\\b|\\."+L+")"),pt=new e.RegExp(et&&tt||ft?"^#?-?[_a-zA-Z]{1}"+k+"*$":et?"^[.#]?-?[_a-zA-Z]{1}"+k+"*$":tt?"^(?:\\*|#-?[_a-zA-Z]{1}"+k+"*)$":"^(?:\\*|[.#]?-?[_a-zA-Z]{1}"+k+"*)$"),dt=new e.Object({a:1,A:1,area:1,AREA:1,link:1,LINK:1}),vt=new e.Object({checked:1,disabled:1,ismap:1,multiple:1,readonly:1,selected:1}),mt=new e.Object({value:"defaultValue",checked:"defaultChecked",selected:"defaultSelected"}),gt=new e.Object({action:2,cite:2,codebase:2,data:2,href:2,longdesc:2,lowsrc:2,src:2,usemap:2}),yt=new e.Object({"class":0,accept:1,"accept-charset":1,align:1,alink:1,axis:1,bgcolor:1,charset:1,checked:1,clear:1,codetype:1,color:1,compact:1,declare:1,defer:1,dir:1,direction:1,disabled:1,enctype:1,face:1,frame:1,hreflang:1,"http-equiv":1,lang:1,language:1,link:1,media:1,method:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,rel:1,rev:1,rules:1,scope:1,scrolling:1,selected:1,shape:1,target:1,text:1,type:1,valign:1,valuetype:1,vlink:1}),bt=new e.Object({accept:1,"accept-charset":1,alink:1,axis:1,bgcolor:1,charset:1,codetype:1,color:1,enctype:1,face:1,hreflang:1,"http-equiv":1,lang:1,language:1,link:1,media:1,rel:1,rev:1,target:1,text:1,type:1,vlink:1}),wt=new e.Object({}),Et=new e.Object({"=":"n=='%m'","^=":"n.indexOf('%m')==0","*=":"n.indexOf('%m')>-1","|=":"(n+'-').indexOf('%m-')==0","~=":"(' '+n+' ').indexOf(' %m ')>-1","$=":"n.substr(n.length-'%m'.length)=='%m'"}),St=new e.Object({ID:new e.RegExp("^\\*?#("+k+"+)|"+C),TAG:new e.RegExp("^("+k+"+)|"+C),CLASS:new e.RegExp("^\\*?\\.("+k+"+$)|"+C)}),xt=new e.Object({spseudos:/^\:(root|empty|(?:first|last|only)(?:-child|-of-type)|nth(?:-last)?(?:-child|-of-type)\(\s*(even|odd|(?:[-+]{0,1}\d*n\s*)?[-+]{0,1}\s*\d*)\s*\))?(.*)/i,dpseudos:/^\:(link|visited|target|active|focus|hover|checked|disabled|enabled|selected|lang\(([-\w]{2,})\)|not\(([^()]*|.*)\))?(.*)/i,attribute:new e.RegExp("^\\["+M+"\\](.*)"),children:/^[\x20\t\n\r\f]*\>[\x20\t\n\r\f]*(.*)/,adjacent:/^[\x20\t\n\r\f]*\+[\x20\t\n\r\f]*(.*)/,relative:/^[\x20\t\n\r\f]*\~[\x20\t\n\r\f]*(.*)/,ancestor:/^[\x20\t\n\r\f]+(.*)/,universal:/^\*(.*)/,id:new e.RegExp("^#("+k+"+)(.*)"),tagName:new e.RegExp("^("+k+"+)(.*)"),className:new e.RegExp("^\\.("+k+"+)(.*)")}),Tt=function(t,n){var r=-1,i;if(!t.length&&e.Array.slice)return e.Array.slice(n);while(i=n[++r])t[t.length]=i;return t},Nt=function(e,t,n){var r=-1,i;while(i=t[++r]){if(false===n(e[e.length]=i)){break}}return e},Ct=function(e,t){var n,o=i;c=e;i=e.ownerDocument||e;if(t||o!==i){s=i.documentElement;at=i.createElement("DiV").nodeName=="DiV";ut=!at&&typeof i.compatMode=="string"?i.compatMode.indexOf("CSS")<0:function(){var e=i.createElement("div").style;return e&&(e.width=1)&&e.width=="1px"}();n=i.createElement("div");n.appendChild(i.createElement("p")).setAttribute("class","xXx");n.appendChild(i.createElement("p")).setAttribute("class","xxx");st=!at&&J&&ut&&(n.getElementsByClassName("xxx").length!=2||n.getElementsByClassName("xXx").length!=2);ot=!at&&X&&ut&&(n.querySelectorAll("[class~=xxx]").length!=2||n.querySelectorAll(".xXx").length!=2);Vt.CACHING&&r.setCache(true,i)}},kt=function(e,t){var n=-1,r=null;while(r=t[++n]){if(r.getAttribute("id")==e){break}}return r},Lt=!Z?function(e,t){e=e.replace(/\\([^\\]{1})/g,"$1");return t.getElementById&&t.getElementById(e)||kt(e,t.getElementsByTagName("*"))}:function(e,t){var n=null;e=e.replace(/\\([^\\]{1})/g,"$1");if(at||t.nodeType!=9){return kt(e,t.getElementsByTagName("*"))}if((n=t.getElementById(e))&&n.name==e&&t.getElementsByName){return kt(e,t.getElementsByName(e))}return n},At=function(e,t){t||(t=i);if(c!==t){Ct(t)}return Lt(e,t)},Ot=function(t,n){var r=t=="*",i=n,s=new e.Array,o=i.firstChild;r||(t=t.toUpperCase());while(i=o){if(i.tagName>"@"&&(r||i.tagName.toUpperCase()==t)){s[s.length]=i}if(o=i.firstChild||i.nextSibling)continue;while(!o&&(i=i.parentNode)&&i!==n){o=i.nextSibling}}return s},Mt=!et&&G?function(e,t){return at||t.nodeType==11?Ot(e,t):o.call(t.getElementsByTagName(e),0)}:function(t,n){var r=-1,i=r,s=new e.Array,o,u=n.getElementsByTagName(t);if(t=="*"){while(o=u[++r]){if(o.nodeName>"@")s[++i]=o}}else{while(o=u[++r]){s[r]=o}}return s},_t=function(e,t){t||(t=i);if(c!==t){Ct(t)}return Mt(e,t)},Dt=function(e,t){return Zt('[name="'+e.replace(/\\([^\\]{1})/g,"$1")+'"]',t)},Pt=function(t,n){var r=-1,i=r,s=new e.Array,o,u=Mt("*",n),a;t=" "+(ut?t.toLowerCase():t).replace(/\\([^\\]{1})/g,"$1")+" ";while(o=u[++r]){a=at?o.getAttribute("class"):o.className;if(a&&a.length&&(" "+(ut?a.toLowerCase():a).replace(R," ")+" ").indexOf(t)>-1){s[++i]=o}}return s},Ht=function(e,t){return tt||st||at||!t.getElementsByClassName?Pt(e,t):o.call(t.getElementsByClassName(e.replace(/\\([^\\]{1})/g,"$1")),0)},Bt=function(e,t){t||(t=i);if(c!==t){Ct(t)}return Ht(e,t)},jt="compareDocumentPosition"in s?function(e,t){return(e.compareDocumentPosition(t)&16)==16}:"contains"in s?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t=t.parentNode){if(t===e)return true}return false},Ft=!nt?function(e,t){return e.getAttribute(t)||""}:function(e,t){t=t.toLowerCase();if(typeof e[t]=="object"){return e.attributes[t]&&e.attributes[t].value||""}return t=="type"?e.getAttribute(t)||"":gt[t]?e.getAttribute(t,2)||"":vt[t]?e.getAttribute(t)?t:"false":(e=e.getAttributeNode(t))&&e.value||""},It=!rt?function(e,t){return at?!!e.getAttribute(t):e.hasAttribute(t)}:function(e,t){t=t.toLowerCase();if(mt[t]){return!!e[mt[t]]}e=e.getAttributeNode(t);return!!(e&&e.specified)},qt=function(e){e=e.firstChild;while(e){if(e.nodeType==3||e.nodeName>"@")return false;e=e.nextSibling}return true},Rt=function(e){return It(e,"href")&&dt[e.nodeName]},Ut=function(e,t){var n=1,r=t?"nextSibling":"previousSibling";while(e=e[r]){if(e.nodeName>"@")++n}return n},zt=function(e,t){var n=1,r=t?"nextSibling":"previousSibling",i=e.nodeName;while(e=e[r]){if(e.nodeName==i)++n}return n},Wt=function(t){if(typeof t=="string"){return Vt[t]}if(typeof t!="object"){return false}for(var n in t){Vt[n]=!!t[n];if(n=="SIMPLENOT"){tn=new e.Object;nn=new e.Object;rn=new e.Object;sn=new e.Object;Vt["USE_QSAPI"]=false}else if(n=="USE_QSAPI"){Vt[n]=!!t[n]&&X}}B=new e.RegExp(Vt.SIMPLENOT?P:H,"g");return true},Xt=function(t){if(Vt.VERBOSITY){throw new e.Error(t)}if(e.console&&e.console.log){e.console.log(t)}},Vt=new e.Object({CACHING:false,SHORTCUTS:false,SIMPLENOT:true,UNIQUE_ID:true,USE_HTML5:true,USE_QSAPI:X,VERBOSITY:true}),$t="r[r.length]=c[k];if(f&&false===f(c[k]))break main;else continue main;",Jt=function(t,n,r){var i=typeof t=="string"?t.match(I):t;typeof n=="string"||(n="");if(i.length==1){n+=Qt(i[0],r?$t:"f&&f(k);return true;",r)}else{var s=-1,o=new e.Object,u;while(u=i[++s]){u=u.replace(j,"");if(!o[u]&&(o[u]=true)){n+=Qt(u,r?$t:"f&&f(k);return true;",r)}}}if(r){return new e.Function("c,s,r,d,h,g,f,v","var N,n,x=0,k=-1,e;main:while((e=c[++k])){"+n+"}return r;")}else{return new e.Function("e,s,r,d,h,g,f,v","var N,n,x=0,k=e;"+n+"return false;")}},Kt="var z=v[@]||(v[@]=[]),l=z.length-1;"+"while(l>=0&&z[l]!==e)--l;"+"if(l!==-1){break;}"+"z[z.length]=e;",Qt=function(t,n,r){var s,o,u,a=0,f,l,c,h,p,d;while(t){a++;if(l=t.match(xt.universal)){f=""}else if(l=t.match(xt.id)){n="if("+(at?'s.getAttribute(e,"id")':'(e.submit?s.getAttribute(e,"id"):e.id)')+'=="'+l[1]+'"'+"){"+n+"}"}else if(l=t.match(xt.tagName)){n="if(e.nodeName"+(at?'=="'+l[1]+'"':".toUpperCase()"+'=="'+l[1].toUpperCase()+'"')+"){"+n+"}"}else if(l=t.match(xt.className)){n="if((n="+(at?'s.getAttribute(e,"class")':"e.className")+')&&n.length&&(" "+'+(ut?"n.toLowerCase()":"n")+".replace("+R+'," ")+" ").indexOf(" '+(ut?l[1].toLowerCase():l[1])+' ")>-1'+"){"+n+"}"}else if(l=t.match(xt.attribute)){f=l[1].split(":");f=f.length==2?f[1]:f[0]+"";if(l[2]&&!Et[l[2]]){Xt('Unsupported operator in attribute selectors "'+t+'"');return""}p=false;d="false";if(l[2]&&l[4]&&(d=Et[l[2]])){yt["class"]=ut?1:0;l[4]=l[4].replace(/(\x22|\x27)/g,"\\$1");l[4]=l[4].replace(/\\([0-9a-f]{2,2})/g,"\\x$1");p=(at?bt:yt)[f.toLowerCase()];d=d.replace(/\%m/g,p?l[4].toLowerCase():l[4])}else if(l[2]=="!="||l[2]=="="){l[4]=l[4].replace(/(\x22|\x27)/g,"\\$1");d="n"+l[2]+'="'+l[4]+'"'}f="n=s."+(l[2]?"get":"has")+'Attribute(e,"'+l[1]+'")'+(p?".toLowerCase();":";");n=f+"if("+(l[2]?d:"n")+"){"+n+"}"}else if(l=t.match(xt.adjacent)){n=(r?"":Kt.replace(/@/g,a))+n;n=Y?"var N"+a+"=e;while(e&&(e=e.previousElementSibling)){"+n+"break;}e=N"+a+";":"var N"+a+'=e;while(e&&(e=e.previousSibling)){if(e.nodeName>"@"){'+n+"break;}}e=N"+a+";"}else if(l=t.match(xt.relative)){n=(r?"":Kt.replace(/@/g,a))+n;n=Y?"var N"+a+"=e;e=e.parentNode.firstElementChild;"+"while(e&&e!==N"+a+"){"+n+"e=e.nextElementSibling;}e=N"+a+";":"var N"+a+"=e;e=e.parentNode.firstChild;"+"while(e&&e!==N"+a+'){if(e.nodeName>"@"){'+n+"}e=e.nextSibling;}e=N"+a+";"}else if(l=t.match(xt.children)){n=(r?"":Kt.replace(/@/g,a))+n;n="var N"+a+"=e;while(e&&e!==h&&e!==g&&(e=e.parentNode)){"+n+"break;}e=N"+a+";"}else if(l=t.match(xt.ancestor)){n=(r?"":Kt.replace(/@/g,a))+n;n="var N"+a+"=e;while(e&&e!==h&&e!==g&&(e=e.parentNode)){"+n+"}e=N"+a+";"}else if((l=t.match(xt.spseudos))&&l[1]){switch(l[1]){case"root":if(l[3]){n="if(e===h||s.contains(h,e)){"+n+"}"}else{n="if(e===h){"+n+"}"}break;case"empty":n="if(s.isEmpty(e)){"+n+"}";break;default:if(l[1]&&l[2]){if(l[2]=="n"){n="if(e!==h){"+n+"}";break}else if(l[2]=="even"){s=2;o=0}else if(l[2]=="odd"){s=2;o=1}else{o=(u=l[2].match(/(-?\d+)$/))?e.parseInt(u[1],10):0;s=(u=l[2].match(/(-?\d*)n/i))?e.parseInt(u[1],10):0;if(u&&u[1]=="-")s=-1}p=s>1?/last/i.test(l[1])?"(n-("+o+"))%"+s+"==0":"n>="+o+"&&(n-("+o+"))%"+s+"==0":s<-1?/last/i.test(l[1])?"(n-("+o+"))%"+s+"==0":"n<="+o+"&&(n-("+o+"))%"+s+"==0":s===0?"n=="+o:/last/i.test(l[1])?s==-1?"n>="+o:"n<="+o:s==-1?"n<="+o:"n>="+o;n="if(e!==h){"+"n=s["+(/-of-type/i.test(l[1])?'"nthOfType"':'"nthElement"')+"]"+"(e,"+(/last/i.test(l[1])?"true":"false")+");"+"if("+p+"){"+n+"}"+"}"}else{s=/first/i.test(l[1])?"previous":"next";u=/only/i.test(l[1])?"previous":"next";o=/first|last/i.test(l[1]);d=/-of-type/i.test(l[1])?"&&n.nodeName!=e.nodeName":'&&n.nodeName<"@"';n="if(e!==h){"+("n=e;while((n=n."+s+"Sibling)"+d+");if(!n){"+(o?n:"n=e;while((n=n."+u+"Sibling)"+d+");if(!n){"+n+"}")+"}")+"}"}break}}else if((l=t.match(xt.dpseudos))&&l[1]){switch(l[1].match(/^\w+/)[0]){case"not":f=l[3].replace(j,"");if(Vt.SIMPLENOT&&!F.test(f)){Xt('Negation pseudo-class only accepts simple selectors "'+t+'"');return""}else{if("compatMode"in i){n="if(!"+Jt(f,"",false)+"(e,s,r,d,h,g)){"+n+"}"}else{n='if(!s.match(e, "'+f.replace(/\x22/g,'\\"')+'",g)){'+n+"}"}}break;case"checked":n='if((typeof e.form!=="undefined"&&(/^(?:radio|checkbox)$/i).test(e.type)&&e.checked)'+(Vt.USE_HTML5?"||(/^option$/i.test(e.nodeName)&&(e.selected||e.checked))":"")+"){"+n+"}";break;case"disabled":n='if(((typeof e.form!=="undefined"'+(Vt.USE_HTML5?"":"&&!(/^hidden$/i).test(e.type)")+")||s.isLink(e))&&e.disabled===true){"+n+"}";break;case"enabled":n='if(((typeof e.form!=="undefined"'+(Vt.USE_HTML5?"":"&&!(/^hidden$/i).test(e.type)")+")||s.isLink(e))&&e.disabled===false){"+n+"}";break;case"lang":p="";if(l[2])p=l[2].substr(0,2)+"-";n='do{(n=e.lang||"").toLowerCase();'+'if((n==""&&h.lang=="'+l[2].toLowerCase()+'")||'+'(n&&(n=="'+l[2].toLowerCase()+'"||n.substr(0,3)=="'+p.toLowerCase()+'")))'+"{"+n+"break;}}while((e=e.parentNode)&&e!==g);";break;case"target":u=i.location?i.location.hash:"";if(u){n='if(e.id=="'+u.slice(1)+'"){'+n+"}"}break;case"link":n="if(s.isLink(e)&&!e.visited){"+n+"}";break;case"visited":n="if(s.isLink(e)&&e.visited){"+n+"}";break;case"active":if(at)break;n="if(e===d.activeElement){"+n+"}";break;case"hover":if(at)break;n="if(e===d.hoverElement){"+n+"}";break;case"focus":if(at)break;n=W?'if(e===d.activeElement&&d.hasFocus()&&(e.type||e.href||typeof e.tabIndex=="number")){'+n+"}":"if(e===d.activeElement&&(e.type||e.href)){"+n+"}";break;case"selected":f=it?"||(n=e.parentNode)&&n.options[n.selectedIndex]===e":"";n="if(/^option$/i.test(e.nodeName)&&(e.selected||e.checked"+f+")){"+n+"}";break;default:break}}else{f=false;h=false;for(f in wt){if((l=t.match(wt[f].Expression))&&l[1]){c=wt[f].Callback(l,n);n=c.source;h=c.status;if(h){break}}}if(!h){Xt('Unknown pseudo-class selector "'+t+'"');return""}if(!f){Xt('Unknown token in selector "'+t+'"');return""}}if(!l){Xt('Invalid syntax in selector "'+t+'"');return""}t=l&&l[l.length-1]}return n},Gt=function(t,n,o,u){var f;if(!(t&&t.nodeName>"@")){Xt("Invalid element argument");return false}else if(typeof n!="string"){Xt("Invalid selector argument");return false}else if(o&&o.nodeType==1&&!jt(o,t)){return false}else if(c!==o){Ct(o||(o=t.ownerDocument))}n=n.replace(j,"");Vt.SHORTCUTS&&(n=r.shortcuts(n,t,o));if(p!=n){if((f=n.match(B))&&f[0]==n){a=(f=n.match(I)).length<2;p=n;v=f}else{Xt('The string "'+n+'", is not a valid CSS selector');return false}}else f=v;if(!nn[n]||tn[n]!==o){nn[n]=Jt(a?[n]:f,"",false);tn[n]=o}return nn[n](t,on,[],i,s,o,u,new e.Object)},Yt=function(e,t){return Zt(e,t,function(){return false})[0]||null},Zt=function(t,n,u){var a,p,v,g,y,b,w=t;if(arguments.length===0){Xt("Not enough arguments");return[]}else if(typeof t!="string"){return[]}else if(n&&!/1|9|11/.test(n.nodeType)){Xt("Invalid or illegal context element");return[]}else if(c!==n){Ct(n||(n=i))}if(Vt.CACHING&&(g=r.loadResults(w,n,i,s))){return u?Nt([],g,u):g}if(!lt&&pt.test(t)){switch(t.charAt(0)){case"#":if(Vt.UNIQUE_ID){g=(v=Lt(t.slice(1),n))?[v]:[]}break;case".":g=Ht(t.slice(1),n);break;default:g=Mt(t,n);break}}else if(!at&&Vt.USE_QSAPI&&!(ot&&ht.test(t))&&!ct.test(t)){try{g=n.querySelectorAll(t)}catch(E){}}if(g){g=u?Nt([],g,u):G?o.call(g):Tt([],g);Vt.CACHING&&r.saveResults(w,n,i,g);return g}t=t.replace(j,"");Vt.SHORTCUTS&&(t=r.shortcuts(t,n));if(p=d!=t){if((y=t.match(B))&&y[0]==t){f=(y=t.match(I)).length<2;d=t;m=y}else{Xt('The string "'+t+'", is not a valid CSS selector');return[]}}else y=m;if(n.nodeType==11){g=Ot("*",n)}else if(!at&&f){if(p){y=t.match(q);b=y[y.length-1];l=b.split(":not")[0];h=t.length-b.length}if(Vt.UNIQUE_ID&&(y=l.match(St.ID))&&(b=y[1])){if(v=Lt(b,n)){if(Gt(v,t)){u&&u(v);g=new e.Array(v)}else g=new e.Array}}else if(Vt.UNIQUE_ID&&(y=t.match(St.ID))&&(b=y[1])){if(v=Lt(b,i)){if("#"+b==t){u&&u(v);g=new e.Array(v)}else if(/[>+~]/.test(t)){n=v.parentNode}else{n=v}}else g=new e.Array}if(g){Vt.CACHING&&r.saveResults(w,n,i,g);return g}if(!J&&(y=l.match(St.TAG))&&(b=y[1])){if((g=Mt(b,n)).length===0){return[]}t=t.slice(0,h)+t.slice(h).replace(b,"*")}else if((y=l.match(St.CLASS))&&(b=y[1])){if((g=Ht(b,n)).length===0){return[]}if(U.test(t.charAt(t.indexOf(b)-1))){t=t.slice(0,h)+t.slice(h).replace("."+b,"")}else{t=t.slice(0,h)+t.slice(h).replace("."+b,"*")}}else if((y=t.match(St.CLASS))&&(b=y[1])){if((g=Ht(b,n)).length===0){return[]}for(a=0,els=new e.Array;g.length>a;++a){els=Tt(els,g[a].getElementsByTagName("*"))}g=els;if(U.test(t.charAt(t.indexOf(b)-1))){t=t.slice(0,h)+t.slice(h).replace("."+b,"")}else{t=t.slice(0,h)+t.slice(h).replace("."+b,"*")}}else if(J&&(y=l.match(St.TAG))&&(b=y[1])){if((g=Mt(b,n)).length===0){return[]}t=t.slice(0,h)+t.slice(h).replace(b,"*")}}if(!g){g=/^(?:applet|object)$/i.test(n.nodeName)?n.childNodes:Mt("*",n)}if(!sn[t]||rn[t]!==n){sn[t]=Jt(f?[t]:y,"",true);rn[t]=n}g=sn[t](g,on,[],i,s,n,u,new e.Object);Vt.CACHING&&r.saveResults(w,n,i,g);return g},en=function(e){return e},tn=new e.Object,nn=new e.Object,rn=new e.Object,sn=new e.Object,on=new e.Object({nthElement:Ut,nthOfType:zt,getAttribute:Ft,hasAttribute:It,byClass:Ht,byName:Dt,byTag:Mt,byId:Lt,contains:jt,isEmpty:qt,isLink:Rt,select:Zt,match:Gt}),un=new e.Object({prefixes:g,encoding:k,operators:y,whitespace:b,identifier:L,attributes:O,combinators:w,pseudoclass:_,pseudoparms:E,quotedvalue:S});r.ACCEPT_NODE=$t;r.byId=At;r.byTag=_t;r.byName=Dt;r.byClass=Bt;r.getAttribute=Ft;r.hasAttribute=It;r.match=Gt;r.first=Yt;r.select=Zt;r.compile=Jt;r.contains=jt;r.configure=Wt;r.setCache=en;r.loadResults=en;r.saveResults=en;r.shortcuts=en;r.emit=Xt;r.Config=Vt;r.Snapshot=on;r.Operators=Et;r.Selectors=wt;r.Tokens=un;r.Version=n;r.registerOperator=function(e,t){Et[e]||(Et[e]=t)};r.registerSelector=function(t,n,r){wt[t]||(wt[t]=new e.Object({Expression:n,Callback:r}))};Ct(i,true)});